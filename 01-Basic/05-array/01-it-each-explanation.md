
# การใช้ `it.each` ใน Jest

ใน Jest, การใช้ `it.each` ช่วยให้คุณสามารถทดสอบฟังก์ชันหรือการทำงานเดียวกันด้วยชุดข้อมูลหลายชุดได้อย่างสะดวก โดยที่คุณไม่จำเป็นต้องเขียนโค้ดซ้ำๆ หลายๆ ครั้ง สำหรับแต่ละกรณีของข้อมูลที่แตกต่างกัน นี่คือรูปแบบและวิธีการใช้งาน:

## รูปแบบการใช้ `it.each`
```javascript
it.each([
  [input1, expectedOutput1],
  [input2, expectedOutput2],
  [input3, expectedOutput3],
])('should return the correct output for input %s', (input, expectedOutput) => {
  // การทดสอบของคุณ
  expect(yourFunction(input)).toBe(expectedOutput);
});
```

## อธิบายรูปแบบ
- `it.each` จะรับอาร์เรย์ที่มีข้อมูลเป็นชุด ๆ แต่ละชุดจะเป็น array ที่มีข้อมูลสำหรับการทดสอบ เช่น ค่า input และค่า output ที่คาดหวัง
- ตัวอย่าง `it.each` ด้านบนจะรับ input และ expectedOutput แล้วนำไปทดสอบกับฟังก์ชัน `yourFunction`
- `%s` ในชื่อของ test case ใช้สำหรับแทนค่าจาก input เพื่อทำให้การทดสอบแสดงชื่อที่ชัดเจนขึ้นเมื่อรัน

## ตัวอย่างการใช้ `it.each`
สมมติว่าคุณมีฟังก์ชัน `add` ที่ทำหน้าที่บวกสองตัวเลขเข้าด้วยกัน:

```javascript
function add(a, b) {
  return a + b;
}
```

คุณสามารถเขียนการทดสอบโดยใช้ `it.each` ได้ดังนี้:

```javascript
describe('add function', () => {
  it.each([
    [1, 2, 3],
    [2, 3, 5],
    [-1, -1, -2],
    [0, 5, 5],
  ])('should return %d when adding %d and %d', (a, b, expected) => {
    expect(add(a, b)).toBe(expected);
  });
});
```

## การทำงานของตัวอย่างด้านบน
- `it.each` จะวนทดสอบแต่ละชุดของข้อมูล เช่น `[1, 2, 3]`:
  - `a` จะเป็น `1`
  - `b` จะเป็น `2`
  - `expected` จะเป็น `3`
- ฟังก์ชัน `add` จะถูกเรียกใช้และคาดหวังให้คืนค่าเป็น `3` ซึ่งจะถูกตรวจสอบด้วย `expect(add(a, b)).toBe(expected);`
- ผลลัพธ์จะแสดงว่าเมื่อ `add(1, 2)` ต้องได้ค่า `3`, `add(2, 3)` ต้องได้ค่า `5`, และอื่น ๆ ตามชุดข้อมูลที่กำหนดไว้

การใช้ `it.each` จึงช่วยให้เขียนการทดสอบที่ต้องการทดสอบหลายๆ กรณีได้สะดวกขึ้น โดยลดการเขียนโค้ดซ้ำๆ และช่วยให้การทดสอบชัดเจนยิ่งขึ้น


